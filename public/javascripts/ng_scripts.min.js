var tolerantApp;tolerantApp=angular.module("tolerantApp",["ngResource","ngSanitize","ngAnimate","ui.bootstrap"]),tolerantApp.controller("body-Ctrl",["$scope",function(a){}]),tolerantApp.controller("header-Ctrl",["$scope","$uibModal",function(a,b){return a.loginModal=function(){var a;return a=b.open({animation:!0,templateUrl:"templates/loginModal.html",controller:"loginModal-Ctrl",windowClass:"login-modal",size:"md"})}}]),tolerantApp.controller("home-Ctrl",["$scope","$items",function(a,b){return a.get_all=function(){return b.get_all().then(function(b){return console.log(b),a.all=b.all,a.productos=b.productos,a.lugares=b.lugares,a.afecciones=b.afecciones},function(a){return console.error(a)})},a.get_all()}]),tolerantApp.controller("loginModal-Ctrl",["$scope","$uibModalInstance","$account",function(a,b,c){return a.login_submit=function(){return a.error_login=!1,console.log(a.login),a.login_form.$valid?c.login(a.login).then(function(a){return console.log(a),location.reload()},function(b){return console.error(b),401===b.status?a.error_login="Usuario o contraseña incorrectos":a.error_login="Error de acceso"}):void 0},a.register_submit=function(){return a.error_register=!1,a.register_form.$valid?c.register(a.register).then(function(a){return console.log(a),location.reload()},function(b){if(console.error(b),!b.data.id)return a.error_register="Error de acceso";switch(b.data.id){case 1:return a.error_register="El nombre de usuario es necesario";case 2:return a.error_register="Nombre de usuario en uso";case 3:return a.error_register="Email en uso";default:return a.error_register="Error de acceso"}}):void 0},a.$watchCollection("register",function(b,d){return a.error_register=!1,a.checkin={status:!1,value:!1},"undefined"!=typeof b?(console.log(a),b.password&&b.repeat?a.register_form.register_repeat.$setValidity("unmatch",b.password===b.repeat):a.register_form.register_repeat.$setValidity("unmatch",!0),!b.nickname||"undefined"!=typeof d&&b.nickname===d.nickname?!1:(a.checkin={status:!0,value:!1},c.available({username:b.nickname}).then(function(b){return console.log(b),a.checkin.value='<i class="fa fa-check txt-green"></i>\n<span class="txt-green txt-sbold small">Este nombre de usuario está disponible</span>'},function(b){return console.error(b),a.checkin.value='<i class="fa fa-times txt-red"></i>\n<span class="txt-red txt-sbold small">Este nombre de usuario ya está en uso</span>'}))):void 0}),a.password_recover=function(){return a.login&&a.login.username?c.recover({username:a.login.username}).then(function(b){return console.log(b),a.recover_ok="Se ha enviado un email con las instrucciones al correo asociado a esta cuenta.",a.error_login=null},function(b){if(console.error(b),!b.data.id)return a.error_register="Error de acceso";switch(b.data.id){case 1:return a.error_login="No hay cuentas registradas con estos datos.";default:return a.error_login="Error de acceso"}}):(a.recover_ok=null,a.error_login="Escribe tu nombre de usuario o tu email")}}]),tolerantApp.factory("$account",["$resource",function(a){return{login:function(b){return a("/account/login").save(b).$promise},logout:function(b){return a("/account/logout").get().$promise},register:function(b){return a("/account/register").save(b).$promise},available:function(b){return a("/account/available").save(b).$promise},recover:function(b){return a("/account/recover").save(b).$promise}}}]),tolerantApp.factory("$items",["$resource",function(a){return{get_all:function(b){return a("/all").get().$promise},logout:function(b){return a("/account/logout").get().$promise},register:function(b){return a("/account/register").save(b).$promise},available:function(b){return a("/account/available").save(b).$promise},recover:function(b){return a("/account/recover").save(b).$promise}}}]);
//# sourceMappingURL=ng_scripts.min.js.map